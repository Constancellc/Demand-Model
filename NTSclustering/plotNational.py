import csv
import matplotlib.pyplot as plt
import random
import numpy as np
import copy


stem = '../../Documents/simulation_results/NTS/national/'

base = [29065,
        28666,
        28749,
        28838,
        28809,
        28789,
        28772,
        28773,
        29077,
        29370,
        29540,
        29569,
        29569,
        29631,
        29891,
        29912,
        29852,
        29806,
        29785,
        29646,
        29504,
        29345,
        29220,
        29049,
        28994,
        28917,
        29056,
        29179,
        29166,
        29119,
        29029,
        28968,
        29089,
        29146,
        29030,
        28911,
        28750,
        28740,
        29054,
        29072,
        29000,
        28921,
        28856,
        28766,
        28704,
        28575,
        28463,
        28351,
        28340,
        28359,
        28396,
        28411,
        28453,
        28459,
        28464,
        28477,
        28507,
        28454,
        28443,
        28506,
        28545,
        28586,
        28840,
        28934,
        28968,
        29321,
        29591,
        29610,
        29527,
        29752,
        29907,
        30217,
        30595,
        30932,
        31645,
        32415,
        32761,
        33026,
        33662,
        33662,
        33925,
        34451,
        34985,
        35542,
        36230,
        36767,
        37303,
        38222,
        39069,
        39715,
        40178,
        40456,
        40617,
        40906,
        41192,
        41337,
        41337,
        41323,
        41344,
        41520,
        41678,
        41693,
        41641,
        41593,
        41627,
        41602,
        41642,
        41571,
        41571,
        41635,
        41763,
        41901,
        42061,
        42145,
        42074,
        42071,
        42022,
        41889,
        41812,
        41777,
        41663,
        41505,
        41391,
        41315,
        41132,
        41073,
        40905,
        40798,
        40786,
        40758,
        40693,
        40412,
        40412,
        40414,
        40447,
        40414,
        40265,
        40180,
        40007,
        40007,
        40059,
        40051,
        40037,
        40082,
        40082,
        40160,
        40169,
        40154,
        40196,
        40230,
        40111,
        40192,
        40350,
        40191,
        40191,
        40174,
        40049,
        40020,
        40338,
        40509,
        40558,
        40632,
        40630,
        40579,
        40632,
        40705,
        40666,
        40710,
        40738,
        40757,
        40924,
        41035,
        40989,
        40940,
        41120,
        41322,
        41250,
        41332,
        41268,
        41327,
        41368,
        41476,
        41582,
        41716,
        41800,
        42009,
        42091,
        42389,
        42710,
        43019,
        43025,
        43328,
        43592,
        43555,
        43261,
        43717,
        44188,
        44532,
        44789,
        45091,
        45585,
        46455,
        47140,
        47663,
        47965,
        48117,
        48136,
        48232,
        48271,
        48425,
        48544,
        48604,
        48695,
        48657,
        48542,
        48591,
        48467,
        48377,
        48364,
        48277,
        48249,
        48072,
        47914,
        47722,
        47720,
        47714,
        47496,
        47367,
        47168,
        47008,
        47223,
        47318,
        47124,
        46840,
        46492,
        46230,
        46260,
        45991,
        45525,
        45185,
        44806,
        44694,
        44749,
        44653,
        44365,
        44042,
        43681,
        43187,
        42767,
        42441,
        42072,
        41934,
        41843,
        41584,
        41274,
        40930,
        40428,
        40059,
        39693,
        39366,
        39029,
        38528,
        38172,
        37880,
        37521,
        37241,
        36902,
        36533,
        36096,
        35752,
        35365,
        34857,
        34667,
        34403,
        34018,
        33630,
        33270,
        32756,
        32659,
        32493,
        32417,
        32278,
        32071,
        31782,
        31550,
        31476,
        31352,
        31217]

dumb = []
l = []
m = []
u = []
base_ = []
for t in range(1440):
    p1 = int(t/5)
    p2 = p1 + 1
    if p2 == len(base):
        p2 -= 1
    f = float(t%5)/5
    base_.append((1-f)*base[p1]/1000+f*base[p2]/1000)
base = base_
with open(stem+'uncontrolled.csv','rU') as csvfile:
    reader = csv.reader(csvfile)
    next(reader)
    for row in reader:
        dumb.append(float(row[1])/1000000+base[int(row[0])])
        m.append(float(row[2])/1000000+base[int(row[0])])
        l.append(float(row[3])/1000000+base[int(row[0])])
        u.append(float(row[4])/1000000+base[int(row[0])])
    
plt.figure()
plt.plot(m)
plt.plot(dumb)
plt.plot(base,c='k',ls=':')
plt.fill_between(range(1440),l,u,alpha=0.2)
plt.xticks()
plt.ylim(0,70)
plt.xlim(0,1439)
plt.ylabel('Power (GW)')
plt.xticks([2*60,6*60,10*60,14*60,18*60,22*60],
           ['02:00','06:00','10:00','14:00','18:00','22:00'])
plt.grid()
plt.show()

